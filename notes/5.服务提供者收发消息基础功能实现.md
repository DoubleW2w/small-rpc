---
title: 5.æœåŠ¡æä¾›è€…æ”¶å‘æ¶ˆæ¯åŸºç¡€åŠŸèƒ½å®ç°
date: 2024/6/06
---
# 5.æœåŠ¡æä¾›è€…æ”¶å‘æ¶ˆæ¯åŸºç¡€åŠŸèƒ½å®ç°

## ğŸˆS

ä¸Šä¸€ç« èŠ‚å®ç°äº†

- æŒ‡å®šåŒ…ä¸‹çš„ç±»æ‰«æ
- `@RpcService` æ³¨è§£çš„ç±»æ‰«æ
- `@RpcReference` æ³¨è§£çš„ç±»æ‰«æ

ã€ŒæœåŠ¡æä¾›è€…ã€å¯åŠ¨åéœ€è¦ç›‘å¬å›ºå®šçš„ **IP** å’Œ **ç«¯å£**ï¼Œå¹¶ä¸”æœåŠ¡æä¾›è€…éœ€è¦æ¥æ”¶ã€ŒæœåŠ¡æ¶ˆè´¹è€…ã€å‘é€è¿‡æ¥çš„æ¶ˆæ¯ï¼Œåç»­å¯¹æ¶ˆæ¯è¿›è¡Œè½¬å‘ï¼Œè°ƒç”¨ç›®æ ‡æ–¹æ³•åï¼Œå‘æœåŠ¡æ¶ˆè´¹è€…å“åº”ç»“æœæ•°æ®ã€‚

## ğŸˆT

æœåŠ¡æä¾›è€…è§£æ `@RpcService` æ³¨è§£ã€æ”¶å‘æ¶ˆæ¯ã€å“åº”ç»“æœçš„ç›®æ ‡ã€‚

<img src="https://doublew2w-myblogimages.oss-cn-hangzhou.aliyuncs.com/img/202406060216029.png"/>

## ğŸˆA

<img src="https://doublew2w-myblogimages.oss-cn-hangzhou.aliyuncs.com/img/202406060344897.png"/>

- `Server` æ˜¯é¡¶å±‚æ¥å£ï¼Œå®šä¹‰æ–¹æ³• `startNettyServer()` 
- `BaseServer` ä½œä¸ºåŸºç¡€æœåŠ¡ï¼Œå®ç° `Server`ï¼Œå¹¶ä¾èµ– `RpcProviderHandler` æ¥æ”¶å‘æ¶ˆæ¯ï¼Œå¤„ç†å“åº”
- `RpcSingleServer` ä½œä¸ºä½¿ç”¨çº¯ Java å¯åŠ¨ rpc æ¡†æ¶çš„ç±»ï¼Œåªæœ‰æ„é€ å™¨æ–¹æ³•ã€‚

## ğŸˆR

```java
  @Test
  public void testRpcSingleServerScanner() {
    // æ‰«æRpcServiceæ³¨è§£ç±»
    RpcSingleServer rpcSingleServer =
        new RpcSingleServer("127.0.0.1:8080", "com.doublew2w.rpc.test");
    // å¯åŠ¨æœåŠ¡å™¨
    rpcSingleServer.startNettyServer();
  }
```

<img src="https://doublew2w-myblogimages.oss-cn-hangzhou.aliyuncs.com/img/202406060347143.png"/>



å»ºç«‹æœåŠ¡æä¾›è€…å·¥ç¨‹

```java
.
â”œâ”€â”€ notes
â”œâ”€â”€ small-rpc-annotation
â”œâ”€â”€ small-rpc-common
â”œâ”€â”€ small-rpc-provider
â”‚   â”œâ”€â”€ small-rpc-provider-common
â”‚   â””â”€â”€ small-rpc-provider-naive
â””â”€â”€ small-rpc-test
    â”œâ”€â”€ small-rpc-test-common
    â””â”€â”€ small-rpc-test-provider
```

é€šè¿‡æœåŠ¡æä¾›è€…çš„ç±»æ‰«æå™¨ `RpcServiceScanner` æ‰«ææœ‰æ³¨è§£çš„ç±»ï¼Œå¹¶è¿›è¡Œå®ä¾‹æ”¾è¿› Map è¿›è¡Œç®¡ç†ã€‚åˆ©ç”¨ netty å®ŒæˆåŸºç¡€çš„æ”¶å‘æ¶ˆæ¯åŠŸèƒ½ã€‚
