---
title: 21.æ³¨å†Œä¸­å¿ƒåŸºç¡€æœåŠ¡åŠŸèƒ½çš„å®ç°
date: 2024/6/13
---
## ğŸˆS

ç›®å‰å®ç°çš„ RPC æ¡†æ¶å®Œæˆçš„åŠŸèƒ½æœ‰ä»¥ä¸‹

- ä»¥JavaåŸç”Ÿè¿›ç¨‹çš„æ–¹å¼
- æœåŠ¡æ¶ˆè´¹è€…ä»¥åŒæ­¥ã€å¼‚æ­¥å’Œå•å‘è°ƒç”¨ä»¥åŠå›è°ƒçš„æ–¹å¼ä¸æœåŠ¡æä¾›è€…æ‰“äº¤é“
- æœåŠ¡æ¶ˆè´¹è€…ä»¥å›è°ƒçš„æ–¹å¼å‘å¤–ä¼ é€’æ•°æ®
- æ”¯æŒåŠ¨æ€ä»£ç†å¯¹è±¡çš„æ¥å£è°ƒç”¨ï¼Œä»¥åŠåŒæ­¥ã€å¼‚æ­¥è°ƒç”¨æ–¹å¼

## ğŸˆT

> æ˜ç¡®ç›®æ ‡ï¼šå¼•å…¥æœåŠ¡æ³¨å†Œä¸­å¿ƒï¼Œå®ç°æœåŠ¡æ²»ç†åŠŸèƒ½

<img src="https://doublew2w-myblogimages.oss-cn-hangzhou.aliyuncs.com/img/202406130507957.png"/>

- å®šä¹‰æ³¨å†Œåˆ°æ³¨å†Œä¸­å¿ƒçš„å…ƒæ•°æ®

- å®šä¹‰æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æ¥å£ï¼Œå¹¶å¯¹å¤–æä¾›æ–¹æ³•ï¼ˆæ³¨å†Œä¸å‘ç°ï¼‰

- å®ç°æ¥å£ï¼Œæä¾›ä¸åŒæœåŠ¡çš„æœåŠ¡æ³¨å†Œå‘ç°

> å…ƒæ•°æ®ä¿¡æ¯å¦‚ä½•å®šä¹‰

- æœåŠ¡åç§°
- æœåŠ¡ç‰ˆæœ¬å·
- æœåŠ¡åœ°å€
- æœåŠ¡ç«¯å£
- æœåŠ¡åˆ†ç»„

å¯¹äºæœåŠ¡åœ°å€å’ŒæœåŠ¡ç«¯å£æ¥è¯´ï¼Œåªéœ€è¦åœ¨æœåŠ¡æä¾›è€…é…ç½®ä¸€æ¬¡å³å¯ã€‚æ¯”å¦‚è¯´ zookeeper ä½œä¸ºæ³¨å†Œä¸­å¿ƒï¼Œ`127.0.0.1:2181` ,æ‰€æœ‰æœåŠ¡æä¾›è€…éƒ½å¾€ zookeeper ä¸ŠæŠ¥æ³¨å†Œï¼Œå› ä¸º `æœåŠ¡åœ°å€:æœåŠ¡ç«¯å£` = `127.0.0.1:2181`

## ğŸˆA

<img src="https://doublew2w-myblogimages.oss-cn-hangzhou.aliyuncs.com/img/202406130730165.png"/>

## ğŸˆR

### æ³¨å†Œç»“æœ

åˆå§‹åŒ–é…ç½®

```java
  public static void init() throws Exception {
    RegistryConfig registryConfig = new RegistryConfig("127.0.0.1:2181", "zookeeper");
    registryService = new ZookeeperRegistryService();
    registryService.init(registryConfig);
    serviceMeta =
        new ServiceMeta(
            ZookeeperRegistryTest.class.getName(), "1.0.0", "127.0.0.1", 8080, "double");
  }
```

è¿›è¡Œæ³¨å†Œ

```
.....
2024-06-13 07:16:36,573 INFO  [main] X509Util: Setting -D jdk.tls.rejectClientInitiatedRenegotiation=true to disable client-initiated TLS renegotiation
2024-06-13 07:16:37,032 INFO  [main] ClientCnxnSocket: jute.maxbuffer value is 1048575 Bytes
2024-06-13 07:16:37,036 INFO  [main] ClientCnxn: zookeeper.request.timeout value is 0. feature enabled=false
2024-06-13 07:16:37,050 INFO  [main] CuratorFrameworkImpl: Default schema
2024-06-13 07:16:37,050 INFO  [main-SendThread(127.0.0.1:2181)] ClientCnxn: Opening socket connection to server kubernetes.docker.internal/127.0.0.1:2181.
2024-06-13 07:16:37,051 INFO  [main-SendThread(127.0.0.1:2181)] ClientCnxn: SASL config status: Will not attempt to authenticate using SASL (unknown error)
2024-06-13 07:16:37,054 INFO  [main-SendThread(127.0.0.1:2181)] ClientCnxn: Socket connection established, initiating session, client: /127.0.0.1:7983, server: kubernetes.docker.internal/127.0.0.1:2181
2024-06-13 07:16:37,061 INFO  [main-SendThread(127.0.0.1:2181)] ClientCnxn: Session establishment complete on server kubernetes.docker.internal/127.0.0.1:2181, session id = 0x1003adf1b9b0004, negotiated timeout = 40000
2024-06-13 07:16:37,066 INFO  [main-EventThread] ConnectionStateManager: State change: CONNECTED
2024-06-13 07:16:37,074 INFO  [main-EventThread] EnsembleTracker: New config event received: {}
2024-06-13 07:16:37,075 INFO  [main-EventThread] EnsembleTracker: New config event received: {}
```



### å¯è§†åŒ– zookeeper

zookeeperå®¢æˆ·ç«¯â€”â€” ZooInspector https://issues.apache.org/jira/secure/attachment/12436620/ZooInspector.zip

ä¸‹è½½å¥½è§£å‹ç¼©ï¼Œè¿›å…¥ build ç›®å½• `java -jar xxx.jar` å³å¯



<img src="https://doublew2w-myblogimages.oss-cn-hangzhou.aliyuncs.com/img/202406130717259.png"/>

### What is Curator

Apache Curator æ˜¯ä¸€ä¸ªé¢å‘ Apache ZooKeeper çš„ Java/JVM å®¢æˆ·ç«¯åº“ï¼Œæ˜¯ä¸€ç§åˆ†å¸ƒå¼åè°ƒæœåŠ¡ã€‚å®ƒåŒ…æ‹¬ä¸€ä¸ªé«˜çº§çš„ API æ¡†æ¶å’Œå®ç”¨ç¨‹åºï¼Œä½¿ Apache ZooKeeper çš„ä½¿ç”¨æ›´åŠ å®¹æ˜“å’Œå¯é ã€‚

![Patrick Hunt&#39;s Quote](https://curator.apache.org/assets/images/ph-quote-b60cff879e3f037f4310e265163de9b2.png)

å®ƒæœ‰å“ªäº›æ¨¡å—ï¼Œ

<img src="https://doublew2w-myblogimages.oss-cn-hangzhou.aliyuncs.com/img/202406130732655.png"/>
